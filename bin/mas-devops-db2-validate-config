#!/usr/bin/env python3
# Licensed Materials - Property of IBM
# 5737-M66, 5900-AAA
# (C) Copyright IBM Corp. 2024 All Rights Reserved.
# US Government Users Restricted Rights - Use, duplication, or disclosure
# restricted by GSA ADP Schedule Contract with IBM Corp.

from kubernetes import client, config
from mas.devops.db2 import validate_db2_config
import argparse
import logging

import urllib3
urllib3.disable_warnings()


if __name__ == "__main__":
    # Initialize the properties we need
    parser = argparse.ArgumentParser()

    # Primary Options
    parser.add_argument("--mas-instance-id", required=True)
    parser.add_argument("--mas-app-id", required=True)
    parser.add_argument("--log-level", required=False, choices=["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"], default="WARNING")



    args, unknown = parser.parse_known_args()

    
    log_level = getattr(logging, args.log_level)
    logging.basicConfig()
    logging.getLogger('mas.devops.db2').setLevel(level=log_level)

    validate_db2_config(
      client.api_client.ApiClient(configuration=config.load_kube_config()), 
      args.mas_instance_id, 
      args.mas_app_id
    )